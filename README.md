# Проект
Сервис, реализующий функционал биржи, с возможностью добавления заявок на покупку или продажу USD.

# Сборка

## Сервер
Проект лучше всего собирать в docker-контейнере, для этого есть соответствующие команды. 
Сборка в docker-контейнере происходит следующим образом:
- Запуск CMake, соответствующего команде
- Поднятие docker-контейнера с образом, содержащим userver
- Поднятие образа с PostgreSQL, инициализация схемы
- 

`docker` означает, что сборка будет производиться в docker-контейнере.

`build` - сборка

`test` - сборка и тестирование

`debug` - сборка с санитайзерами и ассертами.

`release` - сборка с LTO.

`service-start` - запуск проекта.

Команды для сборки и/или запуска:
```shell
make docker-build-debug
make docker-build-release
make docker-test-debug
make docker-test-release
make docker-service-start-debug
make docker-service-start-release
```

Аналогичные команды без приставки `docker` реализуют то же самое локально. (Для такой сборки нужно правильно настроить рабочую среду, у меня в third_party склонирована последняя версия фреймворка userver, также я использую Clang++-17 для сборки)

## Клиент
В папке `client` необоходимо выполнить следующую команду:
```shell
make run
```

(Предварительно у меня была установлена библиотека `cpr`, для отправки запросов с помощью `curl`)

# Реализованный функционал
## Сервер
- Поддерживает подключение нескольких клиентов
- Принимает заявки на покупку или продажу долларов за рубли от разных клиентов
- Даёт возможность просмотра баланса клиента


## Клиент
- Имеет возможность отправлять запросы серверу

## Дополнительный функционал
- Клиент имеет возможность просматривать свои заявки
- Клиент меет возможность отменять заявки
- Клиент должен зарегистрироваться и авторизоваться для исползования сервиса
- Сервер хранит все заявки и совершённые сделки в БД, PostgreSQL
- Наличие OpenAPI

# Интеграционные тесты (pytest)
- Регистрация
- Авторизация
- Добавление заявки
- Получение баланса
- Получение как одной так и всех заявок
- Получение информации о совершённых сделках
- Исполнение заявок
- Исполнение заявок с частичным выполнением
- Исполнение с несколькими заявками


## Дальнейшее развитие
- Улучшить транзакционность
- Добавить возможность просмотра котировок
- Добавить WebSocket для отправки уведомлений пользователю
- Инкапсуляция данных классов
- Вынесение логики работы с БД в отельную папку (repository)
- Добавление новых обработчиков
- Добавление GUI